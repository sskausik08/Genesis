\section{Introduction}

Network operators of enterprise and cloud datacenters deal with
thousands of flow groups traversing large number of heterogeneous
devices. With growing diversity of applications, need for security and
compliance, and the advent of cloud comouting, these flow groups may
be subject to increasingly complex policies. For instance, cloud
tenants or enterprises may require sophisticated middlebox traversals
for certain flow groups, in addition to basic reachability between
their hosts/applications. Cloud operators perators require support for
enforcing isolation between flow groups to provide security, QoS, and
fairness. In addition, they may need to satisfy resource constraints
pertaining to link bandwidths and switch table sizes in order to
perform traffic engineering and network resource management.
Unfortunately, configuring network devices to implement these diverse
and complex policies in aggregate is manual, ad-hoc, and error prone
today. This can lead to violations of service-level agreements and
mis-configurations which have severe performance and security impact.

%%  However, in real-life, the
%% process of policy enforcement by network operators is manual and
%% ad-hoc, leading to violations of service-level agreements and
%% mis-configurations which have severe performance and security
%% impacts. With the boom in cloud services, datacenter networks deal
%% with thousands of flows which are not constant, but in flux, thus,
%% making it difficult to enforce them in an ad-hoc manner.

%% Network operators desire various different end-to-end policies to
%% support in clouds and enterprise networks. Tenants or organisations
%% require support for basic policies like reachability between hosts,
%% and specifying different middlebox policies for certain
%% flows. Operators, on top of that require support for complex policies
%% like traffic isolation between flows to provide fairness and
%% specifying resource constraints like link bandwidth and switch table
%% sizes to perform traffic engineering and network resource management.

Though Software-defined Networking (SDN) has allowed network operators
to program networks in a more intuitive manner, many of existing SDN
tools/frameworks are too low-level or rigid for providing the needed
functionality. Writing controller applications for the above policies
is challenging. For many of the policies, satisfying them is
NP-complete and requires the design of efficient custom heuristics;
combining different policies' heuristics together is
non-trivial. Existing languages like Frenetic~\cite{frenetic} and
Pyretic~\cite{pyretic} are too constraining: operators would ideally
want to specify and realize policies network-wide, whereas these
languages focus on programming individual switch behaviors. \aditya{we
  need to be careful not to bin all SDN languages into this
  switch-by-switch model}.  There has been other research on
network-wide policy enforcement, like joint bandwidth provisioning and
waypoint routing in Merlin \cite{Merlin}, and middlebox policy
enforcement in SIMPLE \cite{simple} or
FlowTags~\cite{flowtags}. However, these approaches are tailor-made to
specific sets of policies, and thus, difficult to extend to support
other kinds of policies.

In this paper, we seek a {\em general} approach, where operators can
specify a variety of custom policies in a simple, declarative way, and
the complexities of correctly realizing the policies in the data plane
are hidden away from them. Such an approach would pave the way for
{\em intent-based networking}~\cite{}, where operators and users
specify {\em what} they want the network to do and do not have to
worry about {\em how} they would configure their
networks. %% To support a cornucopia of policies, an
%% important feature is \emph{generality} of the approach of policy
%% enforcement, so that it can be extended to enforce custom policies
%% required by the operator.
This paper makes a case for using \emph{synthesis} of switch table
forwarding rules as an effective and practical approach to realizing
this vision.
%% switch
%% table forwarding rules to the solve the problem of policy enforcement
%% by use of off-the-shelf SMT-solvers.

We show that enforcement of several of the policies supported by
\Name, e.g., isolation and middlebox traversal, is NP-complete. Thus,
our system, \Name, leverages recent advances in fast SMT solvers
(e.g., Z3~\cite{z3}) to perform synthesis by encoding the problem of
enforcing various policies into a SMT instance, and using the SMT
solver to search for a solution. The solution is then translated into
switch rules. %% This paper presents Genesis, a
%% network management tool where the network operators can express the
%% network-wide policies in a high-level declarative manner and Genesis
%% will synthesize the lower-level switch forwarding rules for realising
%% these policies, eliminating the need for operators to work on
%% switch-level behaviours.
By leveraging the formal reasoning foundations of SAT/SMT solving,
\Name eliminates the room for error in the enforcement of even the
most complex collections of policies.

Unfortunately, naive application of SMT solvers results in synthesis
speeds that don't match the scale of operations of cloud and
enterprise networks today. \aditya{give an example as to how slow
  things can get} To overcome this challenge, \Name leverages a few
domain-specific ideas.  Specifically, it incorporates a novel search
strategy based on using regular expressions to prune the space of
forwarding plane configurations by leveraging data center network
structure. \aditya{the previous sentence is vague} Second, \Name uses
a heuristical synthesis routine that leverages the nature of policy
interactions to improve synthesis performance. \aditya{the previous
  sentence is vague} \aditya{quickly talk about in 1-2 sentences the
  speedup achieved with these optimizations}

%% are
%% huge, and by supporting a set of diverse and complex policies with
%% different search objectives, we require to create a model general and
%% expressive enough to support these. This poses a challenge as to can
%% synthesis performance be improved by leveraging knowledge specific to
%% the problem of policy enforcement in networks?

We implement \Name using ... We evaluate it using .... Key highlights .... \aditya{all of these are todo}.

Thus, the main contribution of this paper are: \aditya{todo}

%% : We present the design and implementation of a network management
%% system with support for a diverse set of complex end-to-end
%% policies like isolation, waypoints and capacity. We designed a
%% novel search strategy using regular expressions to prune the space
%% of forwarding plane configurations by leveraging the network
%% structure to provide properties of the path, especially in
%% datacenter topologies. Lastly, we design a heuristical synthesis
%% routine leveraging the nature of policy interactions to improve
%% synthesis performance.
