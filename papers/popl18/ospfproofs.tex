\begin{theorem}[Correctness without static routes]
	For a OSPF configuration $C$ with edge weights $W$ and no 
	static routes, and for a packet class $pc$, source router $s_{pc}$, destination router $d_{pc}$ and destination $\lambda_{pc}$ and the path provided by Genesis $\pi_{pc}$, if $W$ satisfy constraints \cref{equations}, then $\pi_{pc}$ 
	is in the set of induced paths of $C$, i.e., $~~\pi_{pc} \in \paths^C(pc)$
\end{theorem}
\begin{proof}
	Let us assume that $\pi_{pc} \not\in \paths^C(pc)$. Since, there are no
	static routes in the network, the network will forward traffic through
	the shortest weighted path from $s_{pc}$ to $d_{pc}$. Let us denote
	this path by $\overline{\pi_{pc}} = (s_{pc}, r_1)(r_1, r_2)\ldots (r_m, d_{pc})$. 
	Let us denote the Genesis path $\pi_{pc}$ as $(s_{pc}, s_1)(s_1, s_2) \
	\ldots (s_n, d_{pc})$. Without loss of generality, we assume $s_1 \not= r_1$, 
	else, we can consider the source to the first switch where the paths diverge. 
	
	\noindent Since, $\overline{\pi_{pc}}$ is the shortest weighted path:
	\begin{equation} \label{eq:assumption}
	\sum_{\pi_{pc}} W(s_i, s_j) > \sum_{\overline{\pi_{pc}}} W(r_i, r_j)
	\end{equation}
	
The distance constraints (\ref{eq:distance}) are as follows:  
	\[
\forall s, t. ~\forall r \in N(s).~
D(s,t) \leq W(s,r) + D(r,t)
\]
%\[
%	D_{s_2}^{R_\lambda} \leq W_{s_2}^{s_3} + D_{s_3}^{R_\lambda} 
%\]
%\begin{center}
%	$\ldots$
%\end{center}
%\[
%D_{s_n}^{R_\lambda} \leq W_{s_n}^{R_\lambda} + D_{R_\lambda}^{R_\lambda} 
%\]
The constraints (\ref{eq:unique}) impose $\pi_{pc}$ to be the
unique shortest path by ensuring the edge weights of $\pi_{pc}$
are smaller than any path going through a neighbouring 
router of $s_{pc}$ other than $s_1$. Let us consider the 
neighbour router $r_1$ in $\overline{\pi_{pc}}$:
\[
	\sum_{\mathclap{\substack{\pi_{pc}}}} 
	W(s_i,s_j) < W(s_{pc}, r_1)+ D(r_1, d_{pc})
\]
Using constraint (\ref{eq:unique}) to expand the term $D(r_k, d_{pc})$ for $k <= m$: 
\[
\sum_{\mathclap{\substack{\pi_{pc}}}} 
W(s_i,s_j) < W(s_{pc}, r_1)+ W(r_1, r_2) + D(r_2, d_{pc})
\] 
\begin{center}
$\ldots$
\end{center}
\[
\sum_{\mathclap{\substack{\pi_{pc}}}} 
W(s_i,s_j) < W(s_{pc}, r_1)+ W(r_1, r_2) + \ldots W(r_{m}, d_{pc}) + D(d_{pc}, d_{pc})
\] 
\[
\sum_{\mathclap{\substack{\pi_{pc}}}} 
W(s_i,s_j) < 
\sum_{\mathclap{\substack{\overline{\pi_{pc}}}}} 
W(r_i,r_j)
\]
However, this contradicts the assumption (\ref{eq:assumption}) that 
$\overline{\pi_{pc}}$ is the shortest path from $s_{pc}$ to $d_{pc}$. Hence, proved 
$\pi_{pc} \in \paths^C(pc)$.
\end{proof}
\kausik{Write unsat-learning as an algorithm}
\begin{corollary}[Correctness with static routes]
	For a OSPF configuration $C$ with edge weights $W$ and
	static routes $SR$, and for a packet class $pc$, source router $s_{pc}$, destination router $d_{pc}$ and destination $\lambda_{pc}$ and the path provided by Genesis $\pi_{pc}$, \Cref{alg:unsat} produces $W$ and $SR$ 
	such that $GP$	is in the set of induced paths of $C$, i.e., $~~\pi_{pc} \in \paths^C(pc)$
\end{corollary}
\begin{proof}
Let us assume that $\pi_{pc} \not\in \paths^C(pc)$. 
Let us denote the 
Genesis path $\pi_{pc}$ as $(s_{pc}, s_1)$ $ (s_1, s_2) \
\ldots (s_n, d_{pc})$. 

Given the routing function $\route^C$ which depends on $SR$ and
$W$, let the first switch where routing diverges from $GP$ be at $s_p$: 
$s_{p+1} \not\in \route^C(s_{p}, \lambda_{pc})$. Let us consider  $r \in \route^C(s_{p}, \lambda_{pc})$. By virtue of
constraint (\ref{eq:unique}) added to ensure the path from $s_{p}$
to $d_{pc}$ is the unique shortest path: 
\begin{equation} \label{eq:uniq}
\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
W(s_i, s_j) < W(s_{p}, r) + D(r, d_{pc})
\end{equation}

\Cref{alg:unsat} uses unsatisfiable cores to greedily remove 
constraints and find a solution for $W$ and $SR$. Note that 
the algorithm only removes the shortest unique path 
constraints (\ref{eq:unique}) and 
not the distance constraints (\ref{eq:distance}).
\paragraph{Case 1:} Constraint (\ref{eq:uniq}) is not removed by 
\Cref{alg:unsat}. Thus, there is no static route $(s_p, s_{p+1})$ for
$\lambda_{pc}$, and OSPF-based forwarding occurs at $s_{p}$. 
For any path $(r, r_1), (r_1, r_2) \ldots (r_m, d_{pc})$, 
using the distance constraints (\ref{eq:distance}) to
expand $D(r, d_{pc})$, we get the following: 
\[
\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
W(s_i, s_j) < W(s_{p}, r) + W(r, r_{1}) + D(r_{1}, d_{pc})
\]
\begin{center}
	$\ldots$
\end{center}
\[
\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
W(s_i, s_j) < W(s_{p}, r) + W(r, r_{1}) + \ldots W(r_{m}, d_{pc}) + D(d_{pc}, d_{pc})
\]
Therefore, the weight of any path through $r$ is greater than 
the path through $s_{p}$. However, 
OSPF sends traffic through the shortest weighted
path, therefore, $r \not\in R^C_{ospf}(s_p, \lambda_{pc})$. Hence, 
$s_{p+1} \in \route^C(s_{p}, \lambda_{pc})$.

\paragraph{Case 2:} Constraint (\ref{eq:uniq}) is removed by 
\Cref{alg:unsat} and therefore, $SR(s_p, \lambda_{pc}) = \{s_{p+1}\}$. 
Thus, $s_{p+1} \in \route^C(s_{p}, \lambda_{pc})$ as static routes 
have the higher priority than OSPF. This contradicts our assumption
that $s_{p+1} \not\in \route^C(s_{p}, \lambda_{pc})$. 

Hence, proved by contradiction, $\pi_{pc} \in \paths^C(pc)$.
\end{proof}