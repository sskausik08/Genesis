\begin{theorem}[Correctness]
	For a set of waypoint paths $\{(\pi_{pc}, \waypt_{pc}) ~|~ pc\}$, if edge weights 
	$W$ satisfy constraints (\ref{eq:wdistance}) and (\ref{eq:waypoint}), then for
	each packet class, the shortest path 
	traverses through one of waypoints in $\waypt$.
\end{theorem}
\begin{proof}
	Let us assume there exists a packet class $pc$ with waypoint set $\waypt_{pc}$ 
	and waypoint path $\pi_{pc} = (s_{pc}, s_1)(s_1, s_2)\ldots (s_n, d_{pc})$, 
	such that for $pc$, the 
	shortest path $\sigma_{pc}=(s_{pc}, r_1)$ $(r_1, r_2)\ldots (r_m, d_{pc})$ 
	is not waypoint-compliant, i.e.,  
	$\forall w \in \waypt.~w \not\in \sigma_{pc}$. 
	Let $s_i \not= r_i$ be the first point divergence of the paths ($s_{i-1} = r_{i-1}$).
	
	
	Since $\sigma_{pc}$ is the shortest weighted path: 
	\begin{equation} \label{eq:wassumption}
	\sum_{\pi_{pc}} W \geq \sum_{\sigma_{pc}} W
	\end{equation}
	
Consider router $s_{i-1}$. 
Constraints (\ref{eq:waypoint}) impose 
$(s_{i-1}, s_i)\ldots(s_n, d)$ to be 
shorter than any path which is not waypoint-compliant. 
Let us consider the neighbour router $r_1$ in $\sigma_{pc}$:
	\[
	\sum_{\mathclap{\substack{(s_{i-1}, s_i)\cdots(s_n, d)}}} 
	W < W(s_{i-1}, r_i)+ D(r_i, d, \waypt_{pc})
	\]
	Since $\sigma_{pc}$ does not traverse any waypoint in $\waypt_{pc}$,
	we use constraints (\ref{eq:wdistance}) 
	to expand the terms $D(r_k, d_{pc}, \waypt_{pc})$ for $i \leq k \leq m$:
	\[
	\sum_{\mathclap{\substack{(s_{i-1}, s_i)\cdots(s_n, d)}}} 
	W < W(s_{i-1}, r_i)+ W(r_i, r_{i+1}) + D(r_{i+1}, d,\waypt_{pc})
	\] 
	\begin{center}
		$\ldots$
	\end{center}
	\[
	\sum_{\mathclap{\substack{(s_{i-1}, s_i)\cdots(s_n, d)}}} 
	W < W(s_{i-1}, r_i)+ W(r_i, r_{i+1}) + \ldots W(r_{m}, d) + D(d, d, \waypt_{pc})
	\] 
	\[
	\sum_{\mathclap{\substack{(s_{i-1}, s_i)\cdots(s_n, d)}}} 
	W \hspace{0.4cm}< \hspace{0.4cm}
	\sum_{\mathclap{\substack{(r_{i-1}, r_i)\cdots(r_m, d)}}} 
	W
	\]
	Adding $\Sigma_{(s, s_1)\cdots(s_{i-2},s_{i-1})}$ to both sides:
	\[
	\sum_{\mathclap{\substack{\pi_{pc}}}} 
	W < 
	\sum_{\mathclap{\substack{\sigma_{pc}}}} 
	W
	\] 
However, this contradicts the assumption (\ref{eq:wassumption}) that 
$\sigma_{pc}$ is the shortest path from $s_{pc}$ to $d_{pc}$. Hence, proved, there is no path $\sigma_{pc} \in \paths^C(pc)$ such that $\forall w \in \waypt.~
w \not\in \sigma_{pc}$. 
\end{proof}

%\begin{theorem}[Correctness with static routes]
%	For a OSPF configuration $C$ with edge weights $W$ and
%	static routes $SR$, and for a packet class $pc$, source router $s_{pc}$, destination router $d_{pc}$ and destination $\lambda_{pc}$ and the path provided by Genesis $\pi_{pc}$, \Cref{alg:unsat} produces $W$ and $SR$ 
%	such that $GP$	is in the set of induced paths of $C$, i.e., $~~\pi_{pc} \in \paths^C(pc)$
%\end{theorem}
%\begin{proof}
%Let us assume that $\pi_{pc} \not\in \paths^C(pc)$. 
%Let us denote the 
%Genesis path $\pi_{pc}$ as $(s_{pc}, s_1)$ $ (s_1, s_2) \
%\ldots (s_n, d_{pc})$. 
%
%Given the routing function $\route^C$ which depends on $SR$ and
%$W$, let the first switch where routing diverges from $GP$ be at $s_p$: 
%$s_{p+1} \not\in \route^C(s_{p}, \lambda_{pc})$. Let us consider  $r \in \route^C(s_{p}, \lambda_{pc})$. By virtue of
%constraint (\ref{eq:unique}) added to ensure the path from $s_{p}$
%to $d_{pc}$ is the unique shortest path: 
%\begin{equation} \label{eq:uniq}
%\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
%W(s_i, s_j) < W(s_{p}, r) + D(r, d_{pc})
%\end{equation}
%
%\Cref{alg:unsat} uses unsatisfiable cores to greedily remove 
%constraints and find a solution for $W$ and $SR$. Note that 
%the algorithm only removes the shortest unique path 
%constraints (\ref{eq:unique}) and 
%not the distance constraints (\ref{eq:distance}).
%\paragraph{Case 1:} Constraint (\ref{eq:uniq}) is not removed by 
%\Cref{alg:unsat}. Thus, there is no static route $(s_p, s_{p+1})$ for
%$\lambda_{pc}$, and OSPF-based forwarding occurs at $s_{p}$. 
%For any path $(r, r_1), (r_1, r_2) \ldots (r_m, d_{pc})$, 
%using the distance constraints (\ref{eq:distance}) to
%expand $D(r, d_{pc})$, we get the following: 
%\[
%\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
%W(s_i, s_j) < W(s_{p}, r) + W(r, r_{1}) + D(r_{1}, d_{pc})
%\]
%\begin{center}
%	$\ldots$
%\end{center}
%\[
%\sum_{\mathclap{\substack{(s_{p},s_{p+1})\ldots(s_{n},d_{pc})}}} 
%W(s_i, s_j) < W(s_{p}, r) + W(r, r_{1}) + \ldots W(r_{m}, d_{pc}) + D(d_{pc}, d_{pc})
%\]
%Therefore, the weight of any path through $r$ is greater than 
%the path through $s_{p}$. However, 
%OSPF sends traffic through the shortest weighted
%path, therefore, $r \not\in R^C_{ospf}(s_p, \lambda_{pc})$. Hence, 
%$s_{p+1} \in \route^C(s_{p}, \lambda_{pc})$.
%
%\paragraph{Case 2:} Constraint (\ref{eq:uniq}) is removed by 
%\Cref{alg:unsat} and therefore, $SR(s_p, \lambda_{pc}) = \{s_{p+1}\}$. 
%Thus, $s_{p+1} \in \route^C(s_{p}, \lambda_{pc})$ as static routes 
%have the higher priority than OSPF. This contradicts our assumption
%that $s_{p+1} \not\in \route^C(s_{p}, \lambda_{pc})$. 
%
%Hence, proved by contradiction, $\pi_{pc} \in \paths^C(pc)$.
%\end{proof}