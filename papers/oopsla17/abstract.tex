\begin{abstract}
\loris{I changed title}
\loris{This needs to be completely rewritten to talk about resilience}
Operators of modern networks
require support for diverse and complex end-to-end policies, such
as, middlebox traversals, isolation, and traffic engineering. While 
Software-defined Networking (SDN) provides centralized 
custom routing functionality
in networks to realize these policies, many networks still deploy ``traditional''
control planes running distributed routing protocols like OSPF and BGP
because these protocols are scalable and robust to failures. However, realization of 
policies by distributed control plane configurations is manual and error-prone. 
We show that synthesizing policy-compliant control planes is a
challenging problem and  propose a two-phase 
architecture to automatically generate 
policy-compliant control planes. 
The first phase
synthesizes paths that satisfy the policies pertaining to the data-plane and 
the second phase uses constraint solving and Monte Carlo  search to synthesize
a control plane that satisfies the policies pertaining to the control plane and
that produces the paths synthesized in the first phase. 
%This last phase combines forma synthesis l tconstraint solving, for determining 
%the edge weights to be used for OSPF and BGP routing
%and 
%Markov Chain Monte Carlo (MCMC) sampling to identify a good way to partition the graph into
%multiple routing domains.
We implement our techniques in a tool \name and show that \name can
synthesize policy-compliant configurations for real topologies with up to 125 routers.
\end{abstract}